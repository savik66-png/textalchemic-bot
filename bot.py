import os
import logging
from telegram import Update
from telegram.ext import ApplicationBuilder, CommandHandler, MessageHandler, filters, ContextTypes

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    level=logging.INFO
)
logger = logging.getLogger(__name__)

# –ü–æ–ª—É—á–∞–µ–º —Ç–æ–∫–µ–Ω –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
TOKEN = os.environ.get("BOT_TOKEN")

# –°–ª–æ–≤–∞—Ä—å —Å—Ç–∏–ª–µ–π (–ø–æ–∫–∞ –¥–µ–º–æ-–≤–µ—Ä—Å–∏—è)
STYLES = {
    "phoenix": {
        "name": "üî• –§–ï–ù–ò–ö–°",
        "description": "–í–æ—Å–∫—Ä–µ—à–∞–µ—Ç —Å–∫—É—á–Ω—ã–π —Ç–µ–∫—Å—Ç, –¥–æ–±–∞–≤–ª—è–µ—Ç –æ–≥–Ω—è –∏ —ç–º–æ—Ü–∏–π",
        "emoji": "üî•",
        "rules": ["–¥–æ–±–∞–≤–∏—Ç—å —ç–º–æ—Ü–∏–∏", "–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–æ—Å–∫–ª–∏—Ü–∞–Ω–∏—è", "—Å–æ–∑–¥–∞—Ç—å –≤–æ–≤–ª–µ—á–µ–Ω–∏–µ"]
    },
    "ice": {
        "name": "üßä –õ–Å–î",
        "description": "–ó–∞–º–æ—Ä–∞–∂–∏–≤–∞–µ—Ç —ç–º–æ—Ü–∏–∏, –æ—Å—Ç–∞–≤–ª—è–µ—Ç —á–∏—Å—Ç—ã–µ —Ñ–∞–∫—Ç—ã",
        "emoji": "üßä",
        "rules": ["—É–±—Ä–∞—Ç—å —ç–º–æ—Ü–∏–∏", "–æ—Å—Ç–∞–≤–∏—Ç—å —Ñ–∞–∫—Ç—ã", "—Ñ–æ—Ä–º–∞–ª—å–Ω—ã–π —Ç–æ–Ω"]
    },
    "mechanicus": {
        "name": "üìä –ú–ï–•–ê–ù–ò–ö–£–°",
        "description": "–†–∞–∑–±–∏—Ä–∞–µ—Ç —Ç–µ–∫—Å—Ç –Ω–∞ —à–µ—Å—Ç–µ—Ä—ë–Ω–∫–∏, –æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ —Ä–∞–±–æ—á–∏–µ –¥–µ—Ç–∞–ª–∏",
        "emoji": "üìä",
        "rules": ["—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞—Ç—å", "—É–±—Ä–∞—Ç—å –≤–æ–¥—É", "—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —è–∑—ã–∫"]
    },
    "harmonicus": {
        "name": "üìù –ì–ê–†–ú–û–ù–ò–ö–£–°",
        "description": "–ë–∞–ª–∞–Ω—Å–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç, –¥–µ–ª–∞–µ—Ç –∏–¥–µ–∞–ª—å–Ω–æ —á–∏—Ç–∞–µ–º—ã–º",
        "emoji": "üìù",
        "rules": ["—É–ø—Ä–æ—Å—Ç–∏—Ç—å", "—Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞—Ç—å", "–æ–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞"]
    },
    "architect": {
        "name": "‚ú® –ê–†–•–ò–¢–ï–ö–¢–û–†",
        "description": "–°—Ç—Ä–æ–∏—Ç –∏–∑ —Ç–µ–∫—Å—Ç–∞ —á—ë—Ç–∫–æ–µ –∑–¥–∞–Ω–∏–µ —Å —ç—Ç–∞–∂–∞–º–∏ –∏ –∫–æ–º–Ω–∞—Ç–∞–º–∏",
        "emoji": "‚ú®",
        "rules": ["—Å—Ç—Ä—É–∫—Ç—É—Ä–∞", "–∑–∞–≥–æ–ª–æ–≤–∫–∏", "–∏–µ—Ä–∞—Ä—Ö–∏—è"]
    }
}

# –•—Ä–∞–Ω–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Å—Ç–∏–ª—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ)
user_states = {}

# –î–µ–º–æ-—Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è (–∑–∞–≥–ª—É—à–∫–∏ –¥–ª—è AI)
def transform_text(text: str, style: str) -> str:
    """–ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Ç–µ–∫—Å—Ç –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–º —Å—Ç–∏–ª–µ (–¥–µ–º–æ-–≤–µ—Ä—Å–∏—è)"""
    
    transformations = {
        "phoenix": f"üî• –ü–†–ï–û–ë–†–ê–ñ–ï–ù–ò–ï –§–ï–ù–ò–ö–°–ê:\n\n{text.upper()}!\n\nüí• –≠–º–æ—Ü–∏–∏ –∑–∞—à–∫–∞–ª–∏–≤–∞—é—Ç! –≠—Ç–æ –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ!",
        "ice": f"üßä –ü–†–ï–û–ë–†–ê–ñ–ï–ù–ò–ï –õ–¨–î–ê:\n\n{text.capitalize()}.\n\n‚ùÑÔ∏è –§–∞–∫—Ç—ã. –¢–æ–ª—å–∫–æ —Ñ–∞–∫—Ç—ã. –ë–µ–∑ —ç–º–æ—Ü–∏–π.",
        "mechanicus": f"üìä –ü–†–ï–û–ë–†–ê–ñ–ï–ù–ò–ï –ú–ï–•–ê–ù–ò–ö–£–°–ê:\n\n1. –ê–Ω–∞–ª–∏–∑: {text}\n2. –î–µ—Ç–∞–ª–∏: –¢—Ä–µ–±—É–µ—Ç—Å—è —É—Ç–æ—á–Ω–µ–Ω–∏–µ\n3. –†–µ–∑—É–ª—å—Ç–∞—Ç: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ",
        "harmonicus": f"üìù –ü–†–ï–û–ë–†–ê–ñ–ï–ù–ò–ï –ì–ê–†–ú–û–ù–ò–ö–£–°–ê:\n\n{text}\n\n‚úÖ –¢–µ–∫—Å—Ç —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è —á—Ç–µ–Ω–∏—è.",
        "architect": f"‚ú® –ü–†–ï–û–ë–†–ê–ñ–ï–ù–ò–ï –ê–†–•–ò–¢–ï–ö–¢–û–†–ê:\n\nüèõÔ∏è –°–¢–†–£–ö–¢–£–†–ê –¢–ï–ö–°–¢–ê:\n\nüìå –¢–µ–∑–∏—Å: {text}\n\nüìã –ü—É–Ω–∫—Ç 1: –†–∞–∑–≤–∏—Ç–∏–µ –∏–¥–µ–∏\nüìã –ü—É–Ω–∫—Ç 2: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ\nüìã –ü—É–Ω–∫—Ç 3: –í—ã–≤–æ–¥—ã"
    }
    
    return transformations.get(style, f"‚ö†Ô∏è –°—Ç–∏–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω. –û—Ä–∏–≥–∏–Ω–∞–ª:\n{text}")

async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start"""
    user = update.effective_user
    await update.message.reply_html(
        f"‚öóÔ∏è <b>TextAlchemic Bot</b>\n\n"
        f"–ü—Ä–∏–≤–µ—Ç, {user.mention_html()}! –Ø –∞–ª—Ö–∏–º–∏–∫ —Ç–µ–∫—Å—Ç–∞.\n\n"
        f"<b>–Ø –ø—Ä–µ–≤—Ä–∞—â–∞—é —Ç–µ–∫—Å—Ç –≤ –Ω—É–∂–Ω—ã–π —Å—Ç–∏–ª—å:</b>\n"
        f"‚Ä¢ üî• –§–ï–ù–ò–ö–° - —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç\n"
        f"‚Ä¢ üßä –õ–Å–î - —Ö–æ–ª–æ–¥–Ω—ã–π –∏ —Ñ–∞–∫—Ç–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π\n"
        f"‚Ä¢ üìä –ú–ï–•–ê–ù–ò–ö–£–° - —Å—É—Ö–æ–π –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π\n"
        f"‚Ä¢ üìù –ì–ê–†–ú–û–ù–ò–ö–£–° - —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π\n"
        f"‚Ä¢ ‚ú® –ê–†–•–ò–¢–ï–ö–¢–û–† - —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π\n\n"
        f"<b>–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:</b>\n"
        f"1. –í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–∏–ª—å: /style\n"
        f"2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è\n"
        f"3. –ü–æ–ª—É—á–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç!\n\n"
        f"<i>–ê–ª—Ö–∏–º–∏—è —Å–ª–æ–≤ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –∑–¥–µ—Å—å!</i>"
    )

async def style_command(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ü–æ–∫–∞–∑–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å—Ç–∏–ª–∏"""
    styles_text = "üé≠ <b>–í–´–ë–ï–†–ò–¢–ï –°–¢–ò–õ–¨ –¢–†–ê–ù–°–§–û–†–ú–ê–¶–ò–ò:</b>\n\n"
    
    for key, style in STYLES.items():
        styles_text += f"{style['emoji']} <b>{style['name']}</b>\n"
        styles_text += f"   {style['description']}\n"
        styles_text += f"   /set_{key} - –≤—ã–±—Ä–∞—Ç—å —ç—Ç–æ—Ç —Å—Ç–∏–ª—å\n\n"
    
    styles_text += "üìù <i>–ò–ª–∏ –ø—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç - —è –ø—Ä–µ–¥–ª–æ–∂—É –≤–∞—Ä–∏–∞–Ω—Ç—ã –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è</i>"
    
    await update.message.reply_text(styles_text, parse_mode='HTML')

async def set_style_command(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç–∏–ª—è"""
    user_id = update.effective_user.id
    style_key = update.message.text.replace('/set_', '')
    
    if style_key in STYLES:
        user_states[user_id] = style_key
        style = STYLES[style_key]
        await update.message.reply_text(
            f"‚úÖ –°—Ç–∏–ª—å –≤—ã–±—Ä–∞–Ω: {style['emoji']} <b>{style['name']}</b>\n\n"
            f"–¢–µ–ø–µ—Ä—å –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –≤ —ç—Ç–æ–º —Å—Ç–∏–ª–µ!\n\n"
            f"<i>–ü—Ä–∏–º–µ—Ä: ¬´–ù–∞—à –ø—Ä–æ–¥—É–∫—Ç —É–ª—É—á—à–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å¬ª</i>",
            parse_mode='HTML'
        )
    else:
        await update.message.reply_text("‚ùå –°—Ç–∏–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /style —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Å–ø–∏—Å–æ–∫.")

async def handle_text(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π"""
    user_id = update.effective_user.id
    user_text = update.message.text
    
    # –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –≤—ã–±—Ä–∞–ª —Å—Ç–∏–ª—å
    if user_id in user_states:
        style_key = user_states[user_id]
        transformed = transform_text(user_text, style_key)
        await update.message.reply_text(transformed, parse_mode='HTML')
    else:
        # –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –≤—ã–±—Ä–∞—Ç—å —Å—Ç–∏–ª—å –∏–ª–∏ –ø–æ–∫–∞–∑–∞—Ç—å –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä
        await update.message.reply_text(
            f"üìù <b>–í–∞—à —Ç–µ–∫—Å—Ç:</b> ¬´{user_text}¬ª\n\n"
            f"<b>–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–∏–ª—å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è:</b>\n"
            f"/set_phoenix - –¥–æ–±–∞–≤–∏—Ç—å —ç–º–æ—Ü–∏–∏ üî•\n"
            f"/set_ice - –æ—Å—Ç–∞–≤–∏—Ç—å —Ñ–∞–∫—Ç—ã üßä\n"
            f"/set_mechanicus - —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–∏–ª—å üìä\n"
            f"/set_harmonicus - —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞—Ç—å üìù\n"
            f"/set_architect - —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞—Ç—å ‚ú®\n\n"
            f"<i>–ò–ª–∏ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –≤—Å–µ —Å—Ç–∏–ª–∏: /style</i>",
            parse_mode='HTML'
        )

async def demo_command(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã"""
    demo_text = "–ù–∞—à –ø—Ä–æ–¥—É–∫—Ç –ø–æ–≤—ã—à–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã"
    
    demo_result = (
        "‚öóÔ∏è <b>–î–ï–ú–û–ù–°–¢–†–ê–¶–ò–Ø TEXTALCHEMIC:</b>\n\n"
        f"<b>–ò—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç:</b> ¬´{demo_text}¬ª\n\n"
        "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n\n"
        "<b>üî• –§–ï–ù–ò–ö–° (–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π):</b>\n"
        "–ù–ê–® –ü–†–û–î–£–ö–¢ –ù–ï–í–ï–†–û–Ø–¢–ù–û –ü–û–í–´–®–ê–ï–¢ –≠–§–§–ï–ö–¢–ò–í–ù–û–°–¢–¨ –†–ê–ë–û–¢–´! –≠—Ç–æ –ø—Ä–æ—Ä—ã–≤! üí•\n\n"
        "<b>üßä –õ–Å–î (–•–æ–ª–æ–¥–Ω—ã–π):</b>\n"
        "–ü—Ä–æ–¥—É–∫—Ç –ø–æ–≤—ã—à–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã –Ω–∞ 23%.\n\n"
        "<b>üìä –ú–ï–•–ê–ù–ò–ö–£–° (–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π):</b>\n"
        "1. –§—É–Ω–∫—Ü–∏—è: –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è workflow\n"
        "2. –†–µ–∑—É–ª—å—Ç–∞—Ç: +23% –∫ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏\n"
        "3. –ú–µ—Ç—Ä–∏–∫–∞: KPI —É–ª—É—á—à–µ–Ω\n\n"
        "<b>‚ú® –ê–†–•–ò–¢–ï–ö–¢–û–† (–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π):</b>\n"
        "üèõÔ∏è –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø—Ä–æ–¥—É–∫—Ç–∞:\n"
        "‚Ä¢ –ü–æ–≤—ã—à–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã\n"
        "‚Ä¢ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤\n"
        "‚Ä¢ –†–æ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏\n\n"
        "<i>–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–∏–ª—å –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–∞–º–∏!</i>"
    )
    
    await update.message.reply_text(demo_result, parse_mode='HTML')

async def help_command(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /help"""
    help_text = (
        "üõ† <b>–ü–û–ú–û–©–¨ –ü–û TEXTALCHEMIC BOT</b>\n\n"
        "<b>–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:</b>\n"
        "/start - –Ω–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã\n"
        "/style - –ø–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —Å—Ç–∏–ª–∏\n"
        "/demo - –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã\n"
        "/help - —ç—Ç–∞ —Å–ø—Ä–∞–≤–∫–∞\n\n"
        "<b>–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:</b>\n"
        "1. –í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–∏–ª—å –∫–æ–º–∞–Ω–¥–æ–π /set_[—Å—Ç–∏–ª—å]\n"
        "   –ü—Ä–∏–º–µ—Ä: /set_phoenix\n"
        "2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è\n"
        "3. –ü–æ–ª—É—á–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç!\n\n"
        "<b>–ò–ª–∏ –ø—Ä–æ—Å—Ç–æ:</b>\n"
        "–û—Ç–ø—Ä–∞–≤—å—Ç–µ –ª—é–±–æ–π —Ç–µ–∫—Å—Ç - —è –ø—Ä–µ–¥–ª–æ–∂—É –≤–∞—Ä–∏–∞–Ω—Ç—ã —Å—Ç–∏–ª–µ–π.\n\n"
        "<i>TextAlchemic: –ø—Ä–µ–≤—Ä–∞—â–∞–µ–º —Ç–µ–∫—Å—Ç –≤ –∑–æ–ª–æ—Ç–æ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏!</i>"
    )
    
    await update.message.reply_text(help_text, parse_mode='HTML')

def main():
    """–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞"""
    if not TOKEN:
        logger.error("‚ùå –¢–æ–∫–µ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω! –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è BOT_TOKEN")
        return
    
    print("‚öóÔ∏è TextAlchemic Bot –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è...")
    print(f"üîë –¢–æ–∫–µ–Ω: {TOKEN[:10]}...")
    
    # –°–æ–∑–¥–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
    application = ApplicationBuilder().token(TOKEN).build()
    
    # –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥
    application.add_handler(CommandHandler("start", start))
    application.add_handler(CommandHandler("help", help_command))
    application.add_handler(CommandHandler("style", style_command))
    application.add_handler(CommandHandler("demo", demo_command))
    
    # –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –∫–æ–º–∞–Ω–¥—ã –≤—ã–±–æ—Ä–∞ —Å—Ç–∏–ª—è
    for style_key in STYLES.keys():
        application.add_handler(CommandHandler(f"set_{style_key}", set_style_command))
    
    # –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –æ–±—ã—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
    application.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, handle_text))
    
    # –ó–∞–ø—É—Å–∫–∞–µ–º –±–æ—Ç–∞
    print("ü§ñ TextAlchemic –∑–∞–ø—É—â–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∞–ª—Ö–∏–º–∏–∏ —Ç–µ–∫—Å—Ç–æ–≤!")
    print("‚ÑπÔ∏è  –ù–∞–ø–∏—à–∏—Ç–µ –±–æ—Ç—É: /start –¥–ª—è –Ω–∞—á–∞–ª–∞")
    application.run_polling()

if __name__ == '__main__':
    main()
